{"version":3,"sources":["firebase.js","Form.js","Poll.js","Comment.js","App.js","serviceWorker.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","Form","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleInput","e","setState","defineProperty","target","name","value","handleChoiceInput","newChoices","toConsumableArray","state","choices","currentTarget","dataset","index","addChoice","concat","removeChoice","pop","submitPoll","preventDefault","addPoll","question","choiceNames","votes","Array","length","fill","_this2","react_default","a","createElement","className","onSubmit","htmlFor","maxLength","id","placeholder","rows","onChange","type","pattern","title","map","choice","key","data-index","onClick","Component","Poll","vote","addVote","chart","voted","chartRef","React","createRef","undefined","myChartRef","current","getContext","Chart","defaults","global","defaultFontColor","defaultFontSize","data","labels","poll","datasets","label","borderWidth","backgroundColor","draw","borderColor","hoverBackgroundColor","options","legend","display","scales","xAxes","ticks","beginAtZero","_this$props$poll","ref","aria-label","role","Comment","postComment","comment","trim","database","push","swal","button","toggleComments","displayComments","window","innerWidth","required","comments","keys","reverse","App","choiceIndex","dbRef","newVotes","child","set","newPolls","polls","update","toTop","document","body","scrollTop","documentElement","isLoading","orderByKey","on","response","val","onscroll","getElementById","style","_this3","src_Form","pollObject","src_Poll","src_Comment","addComment","Boolean","location","hostname","match","ReactDOM","render","src_App","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.b3f51ee0.chunk.js","sourcesContent":["import firebase from 'firebase';\r\n\r\n// Your web app's Firebase configuration\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyBCeqwRDRPfzEw3udlB-iemagcUR-NV0uI\",\r\n  authDomain: \"project-5-7d9f7.firebaseapp.com\",\r\n  databaseURL: \"https://project-5-7d9f7.firebaseio.com\",\r\n  projectId: \"project-5-7d9f7\",\r\n  storageBucket: \"project-5-7d9f7.appspot.com\",\r\n  messagingSenderId: \"404454278177\",\r\n  appId: \"1:404454278177:web:45be7f8b4db59190\"\r\n};\r\n// Initialize Firebase\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nexport default firebase;","import React, { Component } from 'react';\r\nimport swal from '@sweetalert/with-react';\r\n\r\nclass Form extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      choices: ['', ''],\r\n      name: '',\r\n      question: '',\r\n    }\r\n  }\r\n\r\n  // sets the input element values to its repective state values\r\n  handleInput = (e) => {\r\n    this.setState({\r\n      [e.target.name]: e.target.value\r\n    });\r\n  }\r\n\r\n  // sets the choice input elements to its repective state values;\r\n  // having a seperate input handler for cleaner code\r\n  handleChoiceInput = (e) => {\r\n    const newChoices = [...this.state.choices];\r\n    newChoices[e.currentTarget.dataset.index] = e.target.value;\r\n    this.setState({\r\n      choices: newChoices\r\n    });\r\n  }\r\n\r\n  // adds another choice input field\r\n  addChoice = () => {\r\n    const newChoices = [...this.state.choices, ''];\r\n    this.setState({\r\n      choices: newChoices,\r\n    });\r\n  }\r\n\r\n  // remove the last choice input field\r\n  removeChoice = () => {\r\n    const newChoices = [...this.state.choices];\r\n    newChoices.pop();\r\n    this.setState({\r\n      choices: newChoices,\r\n    });\r\n  }\r\n\r\n  // submit the poll with the information given\r\n  submitPoll = (e) => {\r\n    e.preventDefault();\r\n\r\n    // used a if statement to do form validation on textarea element\r\n    // if (this.state.question.trim()) {\r\n      this.props.addPoll({\r\n        name: this.state.name,\r\n        question: this.state.question,\r\n        choiceNames: this.state.choices,\r\n        votes: new Array(this.state.choices.length).fill(0)\r\n      });\r\n\r\n      this.setState({\r\n        choices: ['', ''],\r\n        name: '',\r\n        question: '',\r\n      });\r\n\r\n    //   swal(\r\n    //     <div>\r\n    //       <h2>Thanks for submitting</h2>\r\n    //       <p>Let's scroll down and check out the available polls!</p>\r\n    //     </div>,\r\n    //     {\r\n    //       icon: 'success',\r\n    //       button: \"Let's Do It!\"\r\n    //     }\r\n    //   );\r\n    // } else { // poll is not submitted if textarea is empty\r\n    //   swal(\r\n    //     <div>\r\n    //       <h2>The poll question is empty, please enter one or you'll break the internet <span role=\"img\" aria-label=\"Grinning Squinting Face\">😆</span></h2>\r\n    //     </div>,\r\n    //     {\r\n    //       button: \"Silly me\"\r\n    //     }\r\n    //   );\r\n    // }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <form className=\"poll-form wrapper\" onSubmit={this.submitPoll}>\r\n        <label\r\n          className=\"visually-hidden\"\r\n          htmlFor=\"question\">\r\n          Poll Question\r\n        </label>\r\n        <textarea\r\n          // required\r\n          maxLength=\"200\"\r\n          id=\"question\"\r\n          name=\"question\"\r\n          placeholder=\"What do you want the general public to weight in on?\"\r\n          rows=\"3\"\r\n          value={this.state.question}\r\n          onChange={this.handleInput}>\r\n        </textarea>\r\n\r\n        <label\r\n          className=\"visually-hidden\"\r\n          htmlFor=\"name\">\r\n          Your Name\r\n        </label>\r\n        <input\r\n          type=\"text\"\r\n          id=\"name\"\r\n          name=\"name\"\r\n          placeholder=\"What's your name?\"\r\n          // required\r\n          pattern=\"\\S.{0,40}\"\r\n          title=\"Please enter 1 to 40 characters.\"\r\n          value={this.state.name}\r\n          onChange={this.handleInput} />\r\n\r\n        {\r\n          this.state.choices.map((choice, index) => {\r\n            index++;\r\n            return (\r\n              <div key={index}>\r\n                <label\r\n                  className=\"visually-hidden\"\r\n                  htmlFor={\"choice\" + index}>\r\n                  {\"Choice \" + index}\r\n                </label>\r\n\r\n                <input\r\n                  type=\"text\"\r\n                  id={\"choice\" + index}\r\n                  className={\"choice\" + index}\r\n                  name={\"choice\" + index}\r\n                  placeholder={\"Choice \" + index}\r\n                  // required\r\n                  pattern=\"\\S.{0,60}\"\r\n                  title=\"Please enter 1 to 60 characters.\"\r\n                  data-index={index - 1}\r\n                  value={this.state.choices[index - 1]}\r\n                  onChange={this.handleChoiceInput} />\r\n              </div>\r\n            )\r\n          })\r\n        }\r\n\r\n        {this.state.choices.length < 5 ? <button type=\"button\" onClick={this.addChoice}>Add Another Choice</button> : null}\r\n        {this.state.choices.length > 2 ? <button type=\"button\" onClick={this.removeChoice}>Remove Last Choice</button> : null}\r\n\r\n        <button type=\"submit\">Submit Poll</button>\r\n      </form>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Form;","import React, { Component } from 'react';\r\nimport Chart from 'chart.js';\r\nimport pattern from 'patternomaly';\r\n\r\nclass Poll extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.chartRef = React.createRef();\r\n    this.chart = undefined;\r\n\r\n    this.state = {\r\n      voted: false\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const myChartRef = this.chartRef.current.getContext(\"2d\");\r\n\r\n    Chart.defaults.global.defaultFontColor = 'black';\r\n    Chart.defaults.global.defaultFontSize = 20;\r\n    this.chart = new Chart(myChartRef, {\r\n      type: \"horizontalBar\",\r\n      data: {\r\n        labels: this.props.poll.choiceNames,\r\n        datasets: [\r\n          {\r\n            label: '',\r\n            data: this.props.poll.votes,\r\n            borderWidth: 3,\r\n            backgroundColor: [\r\n              pattern.draw('weave', 'rgba(152,251,152, 0.6)'),\r\n              pattern.draw('diagonal', 'rgba(135,206,250, 0.6)'),\r\n              pattern.draw('dot', 'rgba(221,160,221, 0.6)'),\r\n              pattern.draw('plus', 'rgba(255,127,80, 0.6)'),\r\n              pattern.draw('zigzag', 'rgba(240,230,140, 0.6)'),\r\n            ],\r\n            borderColor: [\r\n              'palegreen',\r\n              'lightskyblue',\r\n              'plum',\r\n              'coral',\r\n              'khaki',\r\n            ],\r\n            hoverBackgroundColor: [\r\n              pattern.draw('weave', 'palegreen'),\r\n              pattern.draw('diagonal', 'lightskyblue'),\r\n              pattern.draw('dot', 'plum'),\r\n              pattern.draw('plus', 'coral'),\r\n              pattern.draw('zigzag', 'khaki'),\r\n            ]\r\n          },\r\n        ]\r\n      },\r\n      options: {\r\n        legend: {\r\n          display: false,\r\n        },\r\n        scales: {\r\n          xAxes: [\r\n            {\r\n              ticks: {\r\n                beginAtZero: true,\r\n              }\r\n            }\r\n          ]\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  // add a vote \r\n  vote = (votes, index) => {\r\n    this.props.addVote(\r\n      this.chart, // passing chart so chart.update() can be used\r\n      this.props.id, // the unique key of this particular poll\r\n      votes, // the votes array is pass to make access and hencing updating it easier\r\n      index // the index of the vote to update\r\n    )\r\n\r\n    this.setState({\r\n      voted: true\r\n    });\r\n  }\r\n\r\n  render() {\r\n    // deconstruct\r\n    const {\r\n      question,\r\n      name,\r\n      choiceNames,\r\n      votes\r\n    } = this.props.poll;\r\n\r\n    return (\r\n      <div className=\"poll-container\">\r\n        <div className=\"wrapper\">\r\n          <h2>{question}</h2>\r\n          <h3>By: {name}</h3>\r\n          <canvas ref={this.chartRef} aria-label=\"A poll data\" role=\"img\"></canvas>\r\n\r\n          {\r\n            this.state.voted\r\n              ? <div><h4>Thanks for voting</h4></div>\r\n              : <div>\r\n                <h4>What do you want to vote for?</h4>\r\n                <div className=\"choices-container\">\r\n                  {\r\n                    choiceNames.map((choice, index) => {\r\n                      return (\r\n                        <div key={index}>\r\n                          <label className=\"visually-hidden\">{choice}: {votes[index]}</label>\r\n\r\n                          <button className={\"choice\" + (index + 1)} onClick={() => { this.vote(votes, index) }}>\r\n                            {choice}\r\n                          </button>\r\n                        </div>\r\n                      )\r\n                    })\r\n                  }\r\n                </div>\r\n              </div>\r\n          }\r\n\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Poll;","import React, { Component } from 'react';\r\nimport firebase from './firebase.js';\r\nimport swal from '@sweetalert/with-react';\r\n\r\nclass Comment extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      comment: '',\r\n      displayComments: false\r\n    }\r\n  }\r\n\r\n  // handle comment input\r\n  handleInput = (e) => {\r\n    this.setState({\r\n      [e.target.name]: e.target.value\r\n    });\r\n  }\r\n\r\n  // post new comment\r\n  postComment = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (this.state.comment.trim()) {\r\n      const dbRef = firebase.database().ref(this.props.id + '/comments/')\r\n      dbRef.push(this.state.comment);\r\n\r\n      this.setState({\r\n        comment: ''\r\n      });\r\n    } else {\r\n      swal(\r\n        <div>\r\n          <h2>Posting an empty comment is a no-no, please enter one with content.</h2>\r\n        </div>,\r\n        {\r\n          button: \"Silly me\"\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  // toggle comment display \r\n  toggleComments = () => {\r\n    this.setState({\r\n      displayComments: !this.state.displayComments\r\n    });\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (window.innerWidth > 1000) {\r\n      this.setState({\r\n        displayComments: true\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      this.state.displayComments\r\n        ? <div className=\"comment-container\">\r\n            <button onClick={this.toggleComments}>Hide Comments</button>\r\n\r\n            <form onSubmit={this.postComment}>\r\n              <label\r\n                className=\"visually-hidden\"\r\n                htmlFor=\"comment\">\r\n                Post your comment\r\n            </label>\r\n              <textarea\r\n                required\r\n                maxLength=\"200\"\r\n                id=\"comment\"\r\n                name=\"comment\"\r\n                placeholder=\"What's your thought on this poll?\"\r\n                rows=\"3\"\r\n                value={this.state.comment}\r\n                onChange={this.handleInput}>\r\n              </textarea>\r\n              <button type=\"submit\">Post Comment</button>\r\n            </form>\r\n\r\n            <div>\r\n              {\r\n                this.props.comments\r\n                  ? Object.keys(this.props.comments).reverse().map(comment => <p key={comment}>{this.props.comments[comment]}</p>)\r\n                  : null\r\n              }\r\n            </div>\r\n          </div>\r\n        : <div className=\"comment-container\">\r\n            <button onClick={this.toggleComments}>Show Comments</button>\r\n          </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Comment;","import React, { Component, Fragment } from 'react';\nimport firebase from './firebase.js';\nimport Form from './Form.js';\nimport Poll from './Poll.js';\nimport Comment from './Comment.js';\n\nclass App extends Component {\n  constructor() {\n    super();\n\n    this.state = {\n      // array of objects, each of which contains a unique key and the poll object\n      polls: [],\n      isLoading: true,\n    }\n  }\n\n  // save a vote to firebase\n  addVote = (chart, key, votes, choiceIndex) => {\n    const dbRef = firebase.database().ref(key);\n\n    const newVotes = votes;\n    newVotes[choiceIndex]++;\n\n    dbRef.child('/votes/').set(newVotes);\n\n    const newPolls = [...this.state.polls].map(poll => {\n      if (poll.key === key) {\n        poll.votes = newVotes;\n      }\n      return poll;\n    });\n\n    // setting a new poll so that react will update\n    this.setState({\n      polls: newPolls\n    });\n\n    chart.update();\n  }\n\n  // save a poll to firebase\n  addPoll = (poll) => {\n    const dbRef = firebase.database().ref();\n\n    dbRef.push(poll);\n  }\n\n  // scroll to top\n  toTop = () => {\n    document.body.scrollTop = 0;\n    document.documentElement.scrollTop = 0;\n  }\n\n  componentDidMount() {\n    const dbRef = firebase.database().ref().orderByKey();\n\n    dbRef.on('value', response => {\n      const newPolls = [];\n      const polls = response.val();\n\n      // the polls are already in ascending order as long as the keys are the unique ones generated by firebase,\n      // only need to reverse it to get descending order, which is the lastest poll first\n      for (let key in polls) {\n        newPolls.push({\n          key: key,\n          poll: polls[key]\n        });\n      }\n      newPolls.reverse();\n\n      this.setState({\n        polls: newPolls,\n        isLoading: false,\n      });\n    });\n\n    // display scroll to top button when scrolled down enough\n    window.onscroll = function() {\n      if (document.body.scrollTop > 1000 || document.documentElement.scrollTop > 1000) {\n        document.getElementById(\"toTop\").style.display = \"block\";\n      } else {\n        document.getElementById(\"toTop\").style.display = \"none\";\n      }\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <div className=\"full-view\">\n          <h1>POLL UP</h1>\n          <Form addPoll={this.addPoll} />\n        </div>\n\n        <section className=\"content-container\">\n          {\n            this.state.isLoading\n              ? <div className=\"lds-spinner\"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>\n              : this.state.polls.map(pollObject => {\n                return (\n                  <div className=\"polls-container wrapper\" key={pollObject.key}>\n                    <Poll\n                      id={pollObject.key}\n                      poll={pollObject.poll}\n                      addVote={this.addVote}\n                    />\n                    <Comment \n                      id={pollObject.key}\n                      comments={pollObject.poll.comments}\n                      addComment={this.addComment}\n                    />\n                  </div>\n                )\n              })\n          }\n        </section>\n\n        <button id=\"toTop\" onClick={this.toTop}><h2><p className=\"visually-hidden\">Back to top.</p>^</h2></button>\n      </div>\n    );\n  }\n}\n\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}