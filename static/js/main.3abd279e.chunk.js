(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,a){e.exports=a(49)},27:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),l=a(16),c=a.n(l),i=(a(27),a(11)),r=a(5),s=a(6),m=a(8),u=a(7),d=a(9),h=a(17),p=a.n(h);p.a.initializeApp({apiKey:"AIzaSyBCeqwRDRPfzEw3udlB-iemagcUR-NV0uI",authDomain:"project-5-7d9f7.firebaseapp.com",databaseURL:"https://project-5-7d9f7.firebaseio.com",projectId:"project-5-7d9f7",storageBucket:"project-5-7d9f7.appspot.com",messagingSenderId:"404454278177",appId:"1:404454278177:web:45be7f8b4db59190"});var v=p.a,b=a(14),E=a(12),f=a.n(E),g=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleInput=function(e){a.setState(Object(b.a)({},e.target.name,e.target.value))},a.handleChoiceInput=function(e){var t=Object(i.a)(a.state.choices);t[e.currentTarget.dataset.index]=e.target.value,a.setState({choices:t})},a.addChoice=function(){var e=[].concat(Object(i.a)(a.state.choices),[""]);a.setState({choices:e})},a.removeChoice=function(){var e=Object(i.a)(a.state.choices);e.pop(),a.setState({choices:e})},a.submitPoll=function(e){e.preventDefault(),a.state.question.trim()?(a.props.addPoll({name:a.state.name,question:a.state.question,choiceNames:a.state.choices,votes:new Array(a.state.choices.length).fill(0)}),a.setState({choices:["",""],name:"",question:""}),f()(o.a.createElement("div",null,o.a.createElement("h2",null,"Thanks for submitting"),o.a.createElement("p",null,"Let's scroll down and check out the available polls!")),{icon:"success",button:"Let's Do It!"})):f()(o.a.createElement("div",null,o.a.createElement("h2",null,"The poll question is empty, please enter one or you'll break the internet ",o.a.createElement("span",{role:"img","aria-label":"Grinning Squinting Face"},"\ud83d\ude06"))),{button:"Silly me"})},a.state={choices:["",""],name:"",question:""},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("form",{className:"poll-form wrapper",onSubmit:this.submitPoll},o.a.createElement("label",{className:"visually-hidden",htmlFor:"question"},"Poll Question"),o.a.createElement("textarea",{required:!0,maxLength:"200",id:"question",name:"question",placeholder:"What do you want the general public to weight in on?",rows:"3",value:this.state.question,onChange:this.handleInput}),o.a.createElement("label",{className:"visually-hidden",htmlFor:"name"},"Your Name"),o.a.createElement("input",{type:"text",id:"name",name:"name",placeholder:"What's your name?",required:!0,pattern:"\\S.{0,40}",title:"Please enter 1 to 40 characters.",value:this.state.name,onChange:this.handleInput}),this.state.choices.map(function(t,a){return a++,o.a.createElement("div",{key:a},o.a.createElement("label",{className:"visually-hidden",htmlFor:"choice"+a},"Choice "+a),o.a.createElement("input",{type:"text",id:"choice"+a,className:"choice"+a,name:"choice"+a,placeholder:"Choice "+a,required:!0,pattern:"\\S.{0,60}",title:"Please enter 1 to 60 characters.","data-index":a-1,value:e.state.choices[a-1],onChange:e.handleChoiceInput}))}),this.state.choices.length<5?o.a.createElement("button",{type:"button",onClick:this.addChoice},"Add Another Choice"):null,this.state.choices.length>2?o.a.createElement("button",{type:"button",onClick:this.removeChoice},"Remove Last Choice"):null,o.a.createElement("button",{type:"submit"},"Submit Poll"))}}]),t}(n.Component),y=a(15),w=a.n(y),C=a(4),k=a.n(C),j=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).vote=function(e,t){a.props.addVote(a.chart,a.props.id,e,t),a.setState({voted:!0})},a.chartRef=o.a.createRef(),a.chart=void 0,a.state={voted:!1},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.chartRef.current.getContext("2d");w.a.defaults.global.defaultFontColor="black",w.a.defaults.global.defaultFontSize=20,this.chart=new w.a(e,{type:"horizontalBar",data:{labels:this.props.poll.choiceNames,datasets:[{label:"",data:this.props.poll.votes,borderWidth:3,backgroundColor:[k.a.draw("weave","rgba(152,251,152, 0.6)"),k.a.draw("diagonal","rgba(135,206,250, 0.6)"),k.a.draw("dot","rgba(221,160,221, 0.6)"),k.a.draw("plus","rgba(255,127,80, 0.6)"),k.a.draw("zigzag","rgba(240,230,140, 0.6)")],borderColor:["palegreen","lightskyblue","plum","coral","khaki"],hoverBackgroundColor:[k.a.draw("weave","palegreen"),k.a.draw("diagonal","lightskyblue"),k.a.draw("dot","plum"),k.a.draw("plus","coral"),k.a.draw("zigzag","khaki")]}]},options:{legend:{display:!1},scales:{xAxes:[{ticks:{beginAtZero:!0}}]}}})}},{key:"render",value:function(){var e=this,t=this.props.poll,a=t.question,n=t.name,l=t.choiceNames,c=t.votes;return o.a.createElement("div",{className:"poll-container"},o.a.createElement("div",{className:"wrapper"},o.a.createElement("h2",null,a),o.a.createElement("h3",null,"By: ",n),o.a.createElement("canvas",{ref:this.chartRef,"aria-label":"A poll data",role:"img"}),this.state.voted?o.a.createElement("div",null,o.a.createElement("h4",null,"Thanks for voting")):o.a.createElement("div",null,o.a.createElement("h4",null,"What do you want to vote for?"),o.a.createElement("div",{className:"choices-container"},l.map(function(t,a){return o.a.createElement("div",{key:a},o.a.createElement("label",{className:"visually-hidden"},t,": ",c[a]),o.a.createElement("button",{className:"choice"+(a+1),onClick:function(){e.vote(c,a)}},t))})))))}}]),t}(n.Component),O=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleInput=function(e){a.setState(Object(b.a)({},e.target.name,e.target.value))},a.postComment=function(e){(e.preventDefault(),a.state.comment.trim())?(v.database().ref(a.props.id+"/comments/").push(a.state.comment),a.setState({comment:""})):f()(o.a.createElement("div",null,o.a.createElement("h2",null,"Posting an empty comment is a no-no, please enter one with content.")),{button:"Silly me"})},a.toggleComments=function(){a.setState({displayComments:!a.state.displayComments})},a.state={comment:"",displayComments:!1},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){window.innerWidth>1e3&&this.setState({displayComments:!0})}},{key:"render",value:function(){var e=this;return this.state.displayComments?o.a.createElement("div",{className:"comment-container"},o.a.createElement("button",{onClick:this.toggleComments},"Hide Comments"),o.a.createElement("form",{onSubmit:this.postComment},o.a.createElement("label",{className:"visually-hidden",htmlFor:"comment"},"Post your comment"),o.a.createElement("textarea",{required:!0,maxLength:"200",id:"comment",name:"comment",placeholder:"What's your thought on this poll?",rows:"3",value:this.state.comment,onChange:this.handleInput}),o.a.createElement("button",{type:"submit"},"Post Comment")),o.a.createElement("div",null,this.props.comments?Object.keys(this.props.comments).reverse().map(function(t){return o.a.createElement("p",{key:t},e.props.comments[t])}):null)):o.a.createElement("div",{className:"comment-container"},o.a.createElement("button",{onClick:this.toggleComments},"Show Comments"))}}]),t}(n.Component),S=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).addVote=function(t,a,n,o){var l=v.database().ref(a),c=n;c[o]++,l.child("/votes/").set(c);var r=Object(i.a)(e.state.polls).map(function(e){return e.key===a&&(e.votes=c),e});e.setState({polls:r}),t.update()},e.addPoll=function(e){v.database().ref().push(e)},e.toTop=function(){document.body.scrollTop=0,document.documentElement.scrollTop=0},e.state={polls:[],isLoading:!0},e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;v.database().ref().orderByKey().on("value",function(t){var a=[],n=t.val();for(var o in n)a.push({key:o,poll:n[o]});a.reverse(),e.setState({polls:a,isLoading:!1})}),window.onscroll=function(){document.body.scrollTop>1e3||document.documentElement.scrollTop>1e3?document.getElementById("toTop").style.display="block":document.getElementById("toTop").style.display="none"}}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"App"},o.a.createElement("div",{className:"full-view"},o.a.createElement("h1",null,"POLL UP"),o.a.createElement(g,{addPoll:this.addPoll})),o.a.createElement("section",{className:"content-container"},this.state.isLoading?o.a.createElement("div",{class:"lds-spinner"},o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null)):this.state.polls.map(function(t){return o.a.createElement("div",{className:"polls-container wrapper",key:t.key},o.a.createElement(j,{id:t.key,poll:t.poll,addVote:e.addVote}),o.a.createElement(O,{id:t.key,comments:t.poll.comments,addComment:e.addComment}))})),o.a.createElement("button",{id:"toTop",onClick:this.toTop},o.a.createElement("h2",null,o.a.createElement("p",{className:"visually-hidden"},"Back to top."),"^")))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[22,1,2]]]);
//# sourceMappingURL=main.3abd279e.chunk.js.map